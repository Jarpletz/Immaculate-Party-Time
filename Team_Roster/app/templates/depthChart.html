{% extends "teamContainer.html" %}

{% block teamData %}
<h1>Depth Chart - {{year}} Team {{ team.team_name }}</h1>

<!-- Dropdown to change stat -->
<form method="GET" action="/{{ teamID }}/depthChart">
    <label for="stat">Select Stat: </label>
    <select name="stat" id="stat" onchange="this.form.submit()">
        <option value="percentage" {% if stat == 'percentage' %}selected{% endif %}>Time Percentage</option>
        <option value="PA" {% if stat == 'PA' %}selected{% endif %}>Plate Appearances</option>
        <option value="wOBA" {% if stat == 'wOBA' %}selected{% endif %}>wOBA</option>
    </select>
    <input type="hidden" name="year" value="{{ year }}">
</form>

{% for position, players in positions_stats.items() %}
    <h2>Position: {{ position }}</h2>
    {% if players %}
        <ul>
        {% for player in players %}
            <li>{{ player.nameFirst }} {{ player.nameLast }} - 
                {% if stat == 'percentage' %}
                    {{ player.stat_value }}%
                {% elif stat == 'wOBA' %}
                    {{ player.stat_value|round(3) }}
                {% else %}
                    {{ player.stat_value }}
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No players found for this position.</p>
    {% endif %}
{% endfor %}
{% endblock %}
